# AIPM-frontend

AI å°ˆæ¡ˆç®¡ç†åŠ©æ‰‹ï¼ˆFrontendï¼‰

ç°¡çŸ­èªªæ˜ï¼šé€™æ˜¯ä¸€å€‹ React å‰ç«¯ä»‹é¢ï¼Œç”¨ä¾†èˆ‡ n8n æµç¨‹ï¼ˆwebhook / formsï¼‰æ•´åˆï¼Œæä¾›ï¼š
- AI èŠå¤©åŠ©æ‰‹ï¼ˆPM åŠ©æ‰‹ï¼‰
- å°ˆæ¡ˆç¸½è¡¨ (table)
- ç”˜ç‰¹åœ– (Gantt)
- å°ˆæ¡ˆé—œä¿‚åœ– (Neo4j)
- æ–°å¢ / ç·¨è¼¯ / åˆªé™¤ å°ˆæ¡ˆè¡¨å–®ï¼ˆé€é n8n form iframeï¼‰

---

## é–‹ç™¼èˆ‡åŸ·è¡Œ ğŸ”§

- å®‰è£ï¼š

  ```bash
  npm install
  ```

- é–‹ç™¼ä¼ºæœå™¨ï¼š

  ```bash
  npm start
  ```

- å»ºç½®ç”Ÿç”¢æª”æ¡ˆï¼š

  ```bash
  npm run build
  ```

---

## æª”æ¡ˆèªªæ˜ ğŸ“

ä¸»è¦æª”æ¡ˆï¼ˆä½æ–¼ `src/`ï¼‰ï¼š

- `App.js`  
  æ‡‰ç”¨ç¨‹å¼å…¥å£ï¼Œæ§åˆ¶é é¢åˆ‡æ›èˆ‡åµŒå…¥ n8n è¡¨å–®ï¼ˆæ–°å¢/ç·¨è¼¯/åˆªé™¤ï¼‰iframeã€‚

- `Sidebar.js`  
  å´é‚Šé¸å–®ï¼Œæä¾›å°èˆªæŒ‰éˆ•ï¼ˆAI å°è©±ã€å°ˆæ¡ˆç¸½è¡¨ã€ç”˜ç‰¹åœ–ã€é—œä¿‚åœ–ã€è¡¨å–®ç­‰ï¼‰ã€‚

- `ChatBox.js`  
  AI å°è©±å…ƒä»¶ï¼Œæœƒï¼š
  - å‘ `/webhook/ab` å–å¾—å°ˆæ¡ˆæ‘˜è¦ï¼ˆé¡¯ç¤ºç‚ºç¬¬ä¸€æ¢æ‘˜è¦è¨Šæ¯ï¼‰
  - å‘ `/webhook/chatbot` ç™¼é€ä½¿ç”¨è€…è¨Šæ¯èˆ‡æ­·å²ç´€éŒ„ï¼Œé¡¯ç¤ºåŠ©æ‰‹å›è¦†
  - æ”¯æ´ Enter é€å‡ºã€Shift+Enter æ›è¡Œèˆ‡è¼¸å…¥è¼¸å…¥æ¡†è‡ªå‹•ä¼¸ç¸®

- `ProjectTable.js`  
  é¡¯ç¤ºå°ˆæ¡ˆç¸½è¡¨ï¼Œé€é `/webhook/table` å–å¾—è³‡æ–™ä¸¦ä»¥å¯æ°´å¹³æ²å‹•çš„è¡¨æ ¼å‘ˆç¾ã€‚

- `GanttChart.js`  
  ä½¿ç”¨ vis-timeline å‘ˆç¾ç”˜ç‰¹åœ–ï¼ˆå‹•æ…‹è¼‰å…¥ CDNï¼‰ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼š
  - å¾ `/webhook/table` è®€å–ä»»å‹™è³‡æ–™
  - é»é¸ã€Œåˆ†æã€æ™‚å‘¼å« `/webhook/analysis` å–å¾— AI åˆ†æçµæœ
  - ç·¨è¼¯ä»»å‹™å¾Œä»¥ `/webhook/update_on_gantt` æäº¤è®Šæ›´ï¼ˆpayload å« tasks èˆ‡ _statusï¼‰
  - ç·¨è¼¯ä»‹é¢å«æ–°å¢/åˆªé™¤/æ›´æ–°ç‹€æ…‹ä¸¦æ”¯æ´ Loading/ç¢ºèªæç¤º

- `Neo4jGraph.js`  
  é¡¯ç¤ºå°ˆæ¡ˆé—œä¿‚åœ–ï¼ˆä¾å°ˆæ¡ˆéœ€æ±‚å¯¦ä½œï¼Œå¯èƒ½éœ€è¦å¾Œç«¯æˆ–è³‡æ–™ç«¯é»ï¼‰ã€‚

- `index.js` / `index.css`  
  React é€²å…¥é»èˆ‡å…¨åŸŸæ¨£å¼ã€‚

- `build/`, `public/`  
  å»ºç½®è¼¸å‡ºèˆ‡éœæ…‹è³‡æºï¼ˆå·²å«åœ¨ git æˆ–éƒ¨ç½²å¾Œçš„ç”¢å‡ºè³‡æ–™å¤¾ï¼‰ã€‚

---

## n8n Webhook / Form è¨­å®šï¼ˆç›®å‰ä½¿ç”¨çš„ URLï¼‰ ğŸ”—

> é€™äº› URL ä¾†è‡ªç¨‹å¼ç¢¼æª”æ¡ˆï¼›å¦‚è¦æ›æˆè‡ªå·±çš„ n8nï¼Œè«‹åˆ°å°æ‡‰æª”æ¡ˆä¿®æ”¹ URLã€‚

- GET `/webhook/ab`  (ChatBox.js)
  - ç›®çš„ï¼šå–å›ã€Œå°ˆæ¡ˆæ‘˜è¦ã€ç”¨ä¾†é¡¯ç¤ºåœ¨èŠå¤©è¦–çª—ä¸Šæ–¹
  - ç¯„ä¾‹å›æ‡‰ï¼š `{ "output": "å°ˆæ¡ˆæ‘˜è¦æ–‡å­—..." }`
  - ç¨‹å¼ä½ç½®ï¼š`src/ChatBox.js`

- POST `/webhook/chatbot`  (ChatBox.js)
  - ç›®çš„ï¼šç™¼é€ä½¿ç”¨è€…è¨Šæ¯ï¼ŒåŒ…å« `sessionId` èˆ‡ `chatHistory`ï¼Œç”±å¾Œç«¯ä¸²æ¥ LLM æˆ–é‚è¼¯å›è¦†
  - ç¯„ä¾‹è«‹æ±‚ JSON bodyï¼š
    ```json
    {
      "message": "è«‹å¹«æˆ‘æª¢æŸ¥ä»»å‹™A",
      "sessionId": "<uuid>",
      "chatHistory": [{ "role": "user", "content": "å…ˆå‰è¨Šæ¯" }, { "role": "assistant", "content": "å›è¦†å…§å®¹" }]
    }
    ```
  - ç¯„ä¾‹å›æ‡‰ï¼š `{ "output": "åŠ©æ‰‹å›è¦†æ–‡å­—..." }`
  - ç¨‹å¼ä½ç½®ï¼š`src/ChatBox.js`

- GET `/webhook/table`  (ProjectTable.js, GanttChart.js)
  - ç›®çš„ï¼šæä¾›å°ˆæ¡ˆ / ä»»å‹™è³‡æ–™åˆ—é™£ä¾›è¡¨æ ¼èˆ‡ç”˜ç‰¹åœ–ä½¿ç”¨
  - å›å‚³æ ¼å¼ï¼šArray of objectsï¼ˆæ¯è¡ŒåŒ…å« `å°ˆæ¡ˆåç¨±`, `ä»»å‹™åç¨±`, `é–‹å§‹æ—¥æœŸ`, `é è¨ˆå®Œæˆæ—¥æœŸ` ç­‰æ¬„ä½ï¼‰
  - ç¨‹å¼ä½ç½®ï¼š`src/ProjectTable.js`, `src/GanttChart.js`

- POST `/webhook/analysis`  (GanttChart.js)
  - ç›®çš„ï¼šå‘ AI æˆ–å¾Œç«¯æœå‹™è«‹æ±‚å°ˆæ¡ˆåˆ†æï¼ˆè¼¸å…¥ `projectName`ï¼‰
  - ç¯„ä¾‹è«‹æ±‚ï¼š `{ "projectName": "å°ˆæ¡ˆ A" }`
  - ç¯„ä¾‹å›æ‡‰ï¼š `{ "analysis_text": "åˆ†æçµæœæ–‡å­—..." }`
  - ç¨‹å¼ä½ç½®ï¼š`src/GanttChart.js`

- POST `/webhook/update_on_gantt`  (GanttChart.js)
  - ç›®çš„ï¼šæäº¤åœ¨ç”˜ç‰¹åœ–ç·¨è¼¯éçš„ä»»å‹™è®Šæ›´ã€‚
  - ç¯„ä¾‹è«‹æ±‚ bodyï¼š
    ```json
    {
      "projectName": "å°ˆæ¡ˆ A",
      "tasks": [
        { "PID": 123, "ä»»å‹™åç¨±": "ä»»å‹™ 1", "é€²åº¦ç™¾åˆ†æ¯”": "50%", "_status": "update" },
        { "PID": 456, "ä»»å‹™åç¨±": "ä»»å‹™ 2", "é€²åº¦ç™¾åˆ†æ¯”": "0%", "_status": "create" },
        { "PID": 789, "ä»»å‹™åç¨±": "ä»»å‹™ 3", "_status": "delete" }
      ]
    }
    ```
  - ç¨‹å¼ä½ç½®ï¼š`src/GanttChart.js`

- n8n Formsï¼ˆè¢«åµŒå…¥ `iframe`ï¼Œç”± `App.js` æ§åˆ¶ï¼‰
  - æ–°å¢è¡¨å–®ï¼š `https://wuca-n8n.zeabur.app/form/c9285050-d74b-49b9-b8b5-5d979d0e749d`
  - ç·¨è¼¯è¡¨å–®ï¼š `https://wuca-n8n.zeabur.app/form/2d84c57a-921d-4102-80b5-b966c1f82292`
  - åˆªé™¤è¡¨å–®ï¼š `https://wuca-n8n.zeabur.app/form/eecfa4f0-bbcc-4f4e-bd67-657c9cbbb20e`
  - ç¨‹å¼ä½ç½®ï¼š`src/App.js`

---

## å¸¸è¦‹ä¿®æ”¹é» / æ³¨æ„äº‹é … ğŸ’¡

- è‹¥è¦æ›¿æ›ç‚ºä½ è‡ªå·±çš„ n8nï¼Œä¿®æ”¹ä¸Šé¢æåˆ°çš„ URLï¼ˆæª”æ¡ˆä½ç½®å·²æ¨™æ³¨ï¼‰ã€‚
- `ChatBox` åœ¨åˆå§‹åŒ–æ™‚æœƒè‡ªå‹•ç”¢ç”Ÿ `sessionId`ï¼ˆä½¿ç”¨ `crypto.randomUUID()`ï¼‰ä¸¦å‚³åˆ° `chatbot` webhookï¼Œå¾Œç«¯å¯ç”¨ä¾†é—œè¯å°è©±ã€‚
- ç·¨è¼¯ç”˜ç‰¹åœ–å¾Œé€åˆ° `/webhook/update_on_gantt`ï¼Œpayload ä¸­çš„ `_status` è«‹åœ¨ n8n workflow ä¸­è™•ç†ç‚ºå»ºç«‹/æ›´æ–°/åˆªé™¤é‚è¼¯ã€‚
- `GanttChart` æœƒå‹•æ…‹è¼‰å…¥ `vis-timeline` çš„ CSS/Scriptï¼ˆCDNï¼‰ï¼Œè«‹ç¢ºä¿éƒ¨ç½²ç’°å¢ƒèƒ½å­˜å–å¤–éƒ¨ CDNã€‚

---

## è¯çµ¡ / è²¢ç» ğŸ™

- è‹¥éœ€è¦æ–°å¢åŠŸèƒ½æˆ–ä¿®æ­£ webhook æ ¼å¼ï¼Œè«‹é–‹ PR æˆ–ç›´æ¥ä¿®æ”¹ç›¸å°æ‡‰çš„æª”æ¡ˆä¸¦æ›´æ–° README ä¸­çš„èªªæ˜ã€‚

---

Made with â¤ï¸  by the AIPM team
